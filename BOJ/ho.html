<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOM ì„±ëŠ¥ ë¹„êµ ìµœì í™”</title>
  </head>
  <body>
    <div id="container"></div>

    <script>
      // ğŸ”¹ 10,000ê°œì˜ p íƒœê·¸ ìƒì„±
      function createParagraphs() {
        const container = document.getElementById("container");
        for (let i = 0; i < 10000; i++) {
          const p = document.createElement("p");
          p.id = `p${i}`;
          p.textContent = `Original ${i}`;
          container.appendChild(p);
        }
      }

      // âŒ (ë¹„íš¨ìœ¨ì ì¸ ë°©ë²•) ì§ì ‘ DOM ìš”ì†Œë¥¼ í•˜ë‚˜ì”© ë³€ê²½
      function modifyDomDirectly() {
        console.time("Direct DOM Manipulation");
        for (let i = 0; i < 10000; i++) {
          const p = document.getElementById(`p${i}`);
          if (p) {
            p.textContent = `Modified ${i}`;
          }
        }
        console.timeEnd("Direct DOM Manipulation");
      }

      // âœ… (ìµœì í™”ëœ ë°©ë²•) Document Fragmentë¥¼ í™œìš©í•˜ë˜ ê¸°ì¡´ ìš”ì†Œ ìœ ì§€
      function modifyWithDocumentFragment() {
        console.time("Document Fragment Optimization");
        const container = document.getElementById("container");
        const fragment = document.createDocumentFragment();

        for (let i = 0; i < 10000; i++) {
          const p = document.getElementById(`p${i}`);
          if (p) {
            p.textContent = `Modified ${i}`; // ê¸°ì¡´ ìš”ì†Œë¥¼ ìˆ˜ì •
          }
        }

        console.timeEnd("Document Fragment Optimization");
      }

      // ì‹¤í–‰ íë¦„
      createParagraphs(); // ì´ˆê¸° HTML ìš”ì†Œ ìƒì„±

      setTimeout(() => {
        modifyDomDirectly(); // ì§ì ‘ ë³€ê²½ ë°©ì‹ ì‹¤í–‰
        modifyWithDocumentFragment(); // Document Fragment ë°©ì‹ ì‹¤í–‰
      }, 1000);
    </script>
  </body>
</html>
